<!DOCTYPE html>
<html>
    <head>
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
<script type="text/javascript" src="http://localhost:4000/js/com.alybadawy.external_links.js"></script>


    <title>GPG 생성해보기! – Even Though ... 그럼에도 불구하고 열심히 – 작은 끄적거림</title>

        <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="GnuPG(GNU Privacy Guard)는 PGP(Pretty Good Privacy)를 대체하는 암호화/복보화 프로그램이다. 완전히 무료이고, OpenPG 표준인 RFC4880을 따른다.

" />
    <meta property="og:description" content="GnuPG(GNU Privacy Guard)는 PGP(Pretty Good Privacy)를 대체하는 암호화/복보화 프로그램이다. 완전히 무료이고, OpenPG 표준인 RFC4880을 따른다.

" />
    
    <meta name="author" content="Even Though ... 그럼에도 불구하고 열심히" />

    
    <meta property="og:title" content="GPG 생성해보기!" />
    <meta property="twitter:title" content="GPG 생성해보기!" />
    

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="alternate" type="application/rss+xml" title="Even Though ... 그럼에도 불구하고 열심히 - 작은 끄적거림" href="/feed.xml" />

    <!-- Created with Jekyll Now - http://github.com/barryclark/jekyll-now -->
  </head>
  
	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-55180057-2', 'auto');
		ga('send', 'pageview', {
		  'page': '/Gpg/',
		  'title': 'GPG 생성해보기!'
		});
	</script>
	<!-- End Google Analytics -->


  <body>
      <nav class="navbar navbar-pithy" role="navigation">
    <div class="container">
        <div class="collapse navbar-collapse" id="pithy-navbar">
                    <a href="/">home</a>
                    <a href="/about/">about</a>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
    </nav>
    
    <div class="wrapper-masthead">
      <div class="container">
        <header class="masthead clearfix">
          <a href="/" class="site-avatar"><img src="/images/xmlangel.jpg" /></a>

          <div class="site-info">
            <h1 class="site-name"><a href="/">Even Though ... 그럼에도 불구하고 열심히</a></h1>
            <p class="site-description">작은 끄적거림</p>
          </div>
        </header>
      </div>
    </div>
    <div id="s_left">
<div style="border:1px dashed; padding:5px;" ><h3>Tags</h3>
<ul class="tag-cloud">

  <span style="font-size: 83%">
    <a href="/tags/#docker">
      docker
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#debian">
      debian
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#dpkg">
      dpkg
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#SoapUI">
      SoapUI
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 83%">
    <a href="/tags/#Jmeter">
      Jmeter
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#GPG">
      GPG
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#linux">
      linux
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#command">
      command
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 79%">
    <a href="/tags/#Ubuntu">
      Ubuntu
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#Network">
      Network
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 79%">
    <a href="/tags/#IP">
      IP
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#route">
      route
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#chef">
      chef
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#python">
      python
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#download">
      download
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#urllib">
      urllib
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#PyDev">
      PyDev
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#virtualenv">
      virtualenv
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#Python">
      Python
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#vscode">
      vscode
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#kuberenetes">
      kuberenetes
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#K8s">
      K8s
    </a> &nbsp;&nbsp;
  </span>

</ul></div>
<p>
<div style="border:1px dashed; padding:5px;"><h3>Recent</h3>

  <article class="featured-list">
    <header class="featured-header">
      <a href="/install-kuberenetes/">Centos 에서 Kuberenetes 설치하기</a>
    </header>
    <div class="featured-post">
      * 목차{:toc}centos 에 설치하기 위해서는 master node 와 mini...
    </div>
    <footer>
      <a href="/install-kuberenetes/" class="button">Read more...</a>
    </footer>
  </article>

  <article class="featured-list">
    <header class="featured-header">
      <a href="/vscode/">sublim 에서 vs code 로 </a>
    </header>
    <div class="featured-post">
      Sublime  에서 vs code 로 넘어왔다.* 목차{:toc}# vscode 터...
    </div>
    <footer>
      <a href="/vscode/" class="button">Read more...</a>
    </footer>
  </article>

  <article class="featured-list">
    <header class="featured-header">
      <a href="/pydev-setup/">virtualenv로 Pydev 와 Django 설정 하기</a>
    </header>
    <div class="featured-post">
      Eclipes 플러그인인 PyDev 를 이용한 Django 설정을 하는 법입니다.* ...
    </div>
    <footer>
      <a href="/pydev-setup/" class="button">Read more...</a>
    </footer>
  </article>
</div>
</div>
<div id="main" role="main" class="container" ><article class="post">
  <h1>GPG 생성해보기!</h1>

  <div class="entry">
    <p>GnuPG(GNU Privacy Guard)는 PGP(Pretty Good Privacy)를 대체하는 암호화/복보화 프로그램이다. 완전히 무료이고, OpenPG 표준인 RFC4880을 따른다.</p>

<p>자세한 사항은 <a href="https://www.gnupg.org/">https://www.gnupg.org/</a>	 에서 확인 할 수 있다.</p>

<ul id="markdown-toc">
  <li><a href="#gnupg-key-생성" id="markdown-toc-gnupg-key-생성">GnuPG Key 생성</a></li>
  <li><a href="#gnupg-key-목록-보기" id="markdown-toc-gnupg-key-목록-보기">GnuPG Key 목록 보기</a></li>
  <li><a href="#gpg-key를-사용하여-파일-암호화하기" id="markdown-toc-gpg-key를-사용하여-파일-암호화하기">gpg Key를 사용하여 파일 암호화하기</a></li>
  <li><a href="#gpg-key를-사용하여-파일-복호화하기" id="markdown-toc-gpg-key를-사용하여-파일-복호화하기">gpg Key를 사용하여 파일 복호화하기</a></li>
  <li><a href="#공개키-배포" id="markdown-toc-공개키-배포">공개키 배포</a>    <ul>
      <li><a href="#공개키-export" id="markdown-toc-공개키-export">공개키 Export</a></li>
      <li><a href="#공개키-import" id="markdown-toc-공개키-import">공개키 Import</a></li>
      <li><a href="#개인키-export" id="markdown-toc-개인키-export">개인키 Export</a></li>
      <li><a href="#개인키-import" id="markdown-toc-개인키-import">개인키 Import</a></li>
    </ul>
  </li>
  <li><a href="#gpg-key-삭제" id="markdown-toc-gpg-key-삭제">GPG Key 삭제</a></li>
</ul>

<h1 id="gnupg-key-생성">GnuPG Key 생성</h1>
<p>GPG 개인키(private key)를 생성해보자.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">gpg</span> <span class="o">--</span><span class="n">gen</span><span class="o">-</span><span class="n">key</span>  </code></pre></figure>

<p>생성한 결과는 아래와 같다.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">root</span><span class="vi">@python</span><span class="ss">:/</span><span class="n">home</span><span class="c1"># gpg --gen-key</span>
<span class="n">gpg</span> <span class="p">(</span><span class="no">GnuPG</span><span class="p">)</span> <span class="mf">1.4</span><span class="o">.</span><span class="mi">20</span><span class="p">;</span> <span class="no">Copyright</span> <span class="p">(</span><span class="no">C</span><span class="p">)</span> <span class="mi">2015</span> <span class="no">Free</span> <span class="no">Software</span> <span class="no">Foundation</span><span class="p">,</span> <span class="no">Inc</span><span class="o">.</span>
<span class="no">This</span> <span class="n">is</span> <span class="n">free</span> <span class="ss">software: </span><span class="n">you</span> <span class="n">are</span> <span class="n">free</span> <span class="n">to</span> <span class="n">change</span> <span class="n">and</span> <span class="n">redistribute</span> <span class="n">it</span><span class="o">.</span>
<span class="no">There</span> <span class="n">is</span> <span class="no">NO</span> <span class="no">WARRANTY</span><span class="p">,</span> <span class="n">to</span> <span class="n">the</span> <span class="n">extent</span> <span class="n">permitted</span> <span class="n">by</span> <span class="n">law</span><span class="p">.</span>

<span class="nf">gpg</span><span class="p">:</span> <span class="n">directory</span> <span class="sb">`/root/.gnupg' created
gpg: new configuration file `</span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="p">.</span><span class="nf">gnupg</span><span class="o">/</span><span class="n">gpg</span><span class="p">.</span><span class="nf">conf</span><span class="s1">' created
gpg: WARNING: options in `/root/.gnupg/gpg.conf'</span> <span class="n">are</span> <span class="n">not</span> <span class="n">yet</span> <span class="n">active</span> <span class="n">during</span> <span class="n">this</span> <span class="n">run</span>
<span class="ss">gpg: </span><span class="n">keyring</span> <span class="sb">`/root/.gnupg/secring.gpg' created
gpg: keyring `</span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="p">.</span><span class="nf">gnupg</span><span class="o">/</span><span class="n">pubring</span><span class="p">.</span><span class="nf">gpg</span><span class="err">'</span> <span class="n">created</span>
<span class="no">Please</span> <span class="nb">select</span> <span class="n">what</span> <span class="n">kind</span> <span class="n">of</span> <span class="n">key</span> <span class="n">you</span> <span class="ss">want:
   </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="no">RSA</span> <span class="n">and</span> <span class="no">RSA</span> <span class="p">(</span><span class="n">default</span><span class="p">)</span>
   <span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="no">DSA</span> <span class="n">and</span> <span class="no">Elgamal</span>
   <span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="no">DSA</span> <span class="p">(</span><span class="n">sign</span> <span class="n">only</span><span class="p">)</span>
   <span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="no">RSA</span> <span class="p">(</span><span class="n">sign</span> <span class="n">only</span><span class="p">)</span>
<span class="no">Your</span> <span class="n">selection?</span>
<span class="no">RSA</span> <span class="n">keys</span> <span class="n">may</span> <span class="n">be</span> <span class="n">between</span> <span class="mi">1024</span> <span class="n">and</span> <span class="mi">4096</span> <span class="n">bits</span> <span class="n">long</span><span class="o">.</span>
<span class="no">What</span> <span class="n">keysize</span> <span class="k">do</span> <span class="n">you</span> <span class="n">want?</span> <span class="p">(</span><span class="mi">2048</span><span class="p">)</span>
<span class="no">Requested</span> <span class="n">keysize</span> <span class="n">is</span> <span class="mi">2048</span> <span class="n">bits</span>
<span class="no">Please</span> <span class="n">specify</span> <span class="n">how</span> <span class="n">long</span> <span class="n">the</span> <span class="n">key</span> <span class="n">should</span> <span class="n">be</span> <span class="n">valid</span><span class="o">.</span>
         <span class="mi">0</span> <span class="o">=</span> <span class="n">key</span> <span class="n">does</span> <span class="n">not</span> <span class="n">expire</span>
      <span class="o">&lt;</span><span class="n">n</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="n">key</span> <span class="n">expires</span> <span class="k">in</span> <span class="n">n</span> <span class="n">days</span>
      <span class="o">&lt;</span><span class="n">n</span><span class="o">&gt;</span><span class="n">w</span> <span class="o">=</span> <span class="n">key</span> <span class="n">expires</span> <span class="k">in</span> <span class="n">n</span> <span class="n">weeks</span>
      <span class="o">&lt;</span><span class="n">n</span><span class="o">&gt;</span><span class="n">m</span> <span class="o">=</span> <span class="n">key</span> <span class="n">expires</span> <span class="k">in</span> <span class="n">n</span> <span class="n">months</span>
      <span class="o">&lt;</span><span class="n">n</span><span class="o">&gt;</span><span class="n">y</span> <span class="o">=</span> <span class="n">key</span> <span class="n">expires</span> <span class="k">in</span> <span class="n">n</span> <span class="n">years</span>
<span class="no">Key</span> <span class="n">is</span> <span class="n">valid</span> <span class="k">for</span><span class="p">?</span> <span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="no">Key</span> <span class="n">does</span> <span class="n">not</span> <span class="n">expire</span> <span class="n">at</span> <span class="n">all</span>
<span class="no">Is</span> <span class="n">this</span> <span class="n">correct?</span> <span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="no">N</span><span class="p">)</span> <span class="n">y</span>

<span class="no">You</span> <span class="n">need</span> <span class="n">a</span> <span class="n">user</span> <span class="no">ID</span> <span class="n">to</span> <span class="n">identify</span> <span class="n">your</span> <span class="n">key</span><span class="p">;</span> <span class="n">the</span> <span class="n">software</span> <span class="n">constructs</span> <span class="n">the</span> <span class="n">user</span> <span class="no">ID</span>
<span class="n">from</span> <span class="n">the</span> <span class="no">Real</span> <span class="no">Name</span><span class="p">,</span> <span class="no">Comment</span> <span class="n">and</span> <span class="no">Email</span> <span class="no">Address</span> <span class="k">in</span> <span class="n">this</span> <span class="ss">form:
    </span><span class="s2">"Heinrich Heine (Der Dichter) &lt;heinrichh@duesseldorf.de&gt;"</span>

<span class="no">Real</span> <span class="ss">name: </span><span class="n">kmkim</span>
<span class="no">Email</span> <span class="ss">address: </span><span class="n">kwangmyung</span><span class="p">.</span><span class="nf">kim</span><span class="vi">@gmail</span><span class="p">.</span><span class="nf">com</span>
<span class="no">Comment</span><span class="p">:</span> <span class="n">kmkim</span>
<span class="no">You</span> <span class="n">selected</span> <span class="n">this</span> <span class="no">USER</span><span class="o">-</span><span class="no">ID</span><span class="p">:</span>
    <span class="s2">"kmkim (kmkim) &lt;kwangmyung.kim@gmail.com&gt;"</span>

<span class="no">Change</span> <span class="p">(</span><span class="no">N</span><span class="p">)</span><span class="n">ame</span><span class="p">,</span> <span class="p">(</span><span class="no">C</span><span class="p">)</span><span class="n">omment</span><span class="p">,</span> <span class="p">(</span><span class="no">E</span><span class="p">)</span><span class="n">mail</span> <span class="n">or</span> <span class="p">(</span><span class="no">O</span><span class="p">)</span><span class="n">kay</span><span class="o">/</span><span class="p">(</span><span class="no">Q</span><span class="p">)</span><span class="n">uit?</span> <span class="no">O</span>
<span class="no">You</span> <span class="n">need</span> <span class="n">a</span> <span class="no">Passphrase</span> <span class="n">to</span> <span class="n">protect</span> <span class="n">your</span> <span class="n">secret</span> <span class="n">key</span><span class="p">.</span>

<span class="nf">passphrase</span> <span class="n">not</span> <span class="n">correctly</span> <span class="n">repeated</span><span class="p">;</span> <span class="n">try</span> <span class="n">again</span><span class="o">.</span>
<span class="no">We</span> <span class="n">need</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">a</span> <span class="n">lot</span> <span class="n">of</span> <span class="n">random</span> <span class="n">bytes</span><span class="o">.</span> <span class="no">It</span> <span class="n">is</span> <span class="n">a</span> <span class="n">good</span> <span class="n">idea</span> <span class="n">to</span> <span class="n">perform</span>
<span class="n">some</span> <span class="n">other</span> <span class="n">action</span> <span class="p">(</span><span class="n">type</span> <span class="n">on</span> <span class="n">the</span> <span class="n">keyboard</span><span class="p">,</span> <span class="n">move</span> <span class="n">the</span> <span class="n">mouse</span><span class="p">,</span> <span class="n">utilize</span> <span class="n">the</span>
<span class="n">disks</span><span class="p">)</span> <span class="n">during</span> <span class="n">the</span> <span class="n">prime</span> <span class="n">generation</span><span class="p">;</span> <span class="n">this</span> <span class="n">gives</span> <span class="n">the</span> <span class="n">random</span> <span class="n">number</span>
<span class="n">generator</span> <span class="n">a</span> <span class="n">better</span> <span class="n">chance</span> <span class="n">to</span> <span class="n">gain</span> <span class="n">enough</span> <span class="n">entropy</span><span class="p">.</span>
<span class="nf">.</span><span class="o">......+++++</span>
<span class="o">...+++++</span>
<span class="no">We</span> <span class="n">need</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">a</span> <span class="n">lot</span> <span class="n">of</span> <span class="n">random</span> <span class="n">bytes</span><span class="o">.</span> <span class="no">It</span> <span class="n">is</span> <span class="n">a</span> <span class="n">good</span> <span class="n">idea</span> <span class="n">to</span> <span class="n">perform</span>
<span class="n">some</span> <span class="n">other</span> <span class="n">action</span> <span class="p">(</span><span class="n">type</span> <span class="n">on</span> <span class="n">the</span> <span class="n">keyboard</span><span class="p">,</span> <span class="n">move</span> <span class="n">the</span> <span class="n">mouse</span><span class="p">,</span> <span class="n">utilize</span> <span class="n">the</span>
<span class="n">disks</span><span class="p">)</span> <span class="n">during</span> <span class="n">the</span> <span class="n">prime</span> <span class="n">generation</span><span class="p">;</span> <span class="n">this</span> <span class="n">gives</span> <span class="n">the</span> <span class="n">random</span> <span class="n">number</span>
<span class="n">generator</span> <span class="n">a</span> <span class="n">better</span> <span class="n">chance</span> <span class="n">to</span> <span class="n">gain</span> <span class="n">enough</span> <span class="n">entropy</span><span class="p">.</span>
<span class="nf">.</span><span class="o">........+++++</span>
<span class="p">.</span><span class="nf">+</span><span class="o">++++</span>
<span class="ss">gpg: </span><span class="sr">/root/</span><span class="p">.</span><span class="nf">gnupg</span><span class="o">/</span><span class="n">trustdb</span><span class="p">.</span><span class="nf">gpg</span><span class="p">:</span> <span class="n">trustdb</span> <span class="n">created</span>
<span class="ss">gpg: </span><span class="n">key</span> <span class="mi">3</span><span class="no">C86E014</span> <span class="n">marked</span> <span class="n">as</span> <span class="n">ultimately</span> <span class="n">trusted</span>
<span class="kp">public</span> <span class="n">and</span> <span class="n">secret</span> <span class="n">key</span> <span class="n">created</span> <span class="n">and</span> <span class="n">signed</span><span class="p">.</span>

<span class="nf">gpg</span><span class="p">:</span> <span class="n">checking</span> <span class="n">the</span> <span class="n">trustdb</span>
<span class="ss">gpg: </span><span class="mi">3</span> <span class="n">marginal</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="n">needed</span><span class="p">,</span> <span class="mi">1</span> <span class="n">complete</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="n">needed</span><span class="p">,</span> <span class="no">PGP</span> <span class="n">trust</span> <span class="n">model</span>
<span class="ss">gpg: depth: </span><span class="mi">0</span>  <span class="ss">valid:   </span><span class="mi">1</span>  <span class="ss">signed:   </span><span class="mi">0</span>  <span class="ss">trust: </span><span class="mi">0</span><span class="o">-</span><span class="p">,</span> <span class="mi">0</span><span class="n">q</span><span class="p">,</span> <span class="mi">0</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="n">m</span><span class="p">,</span> <span class="mi">0</span><span class="n">f</span><span class="p">,</span> <span class="mi">1</span><span class="n">u</span>
<span class="n">pub</span>   <span class="mi">2048</span><span class="no">R</span><span class="o">/</span><span class="mi">3</span><span class="no">C86E014</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">08</span>
      <span class="no">Key</span> <span class="n">fingerprint</span> <span class="o">=</span> <span class="no">B6D2</span> <span class="mi">95</span><span class="no">AF</span> <span class="no">D537</span> <span class="mi">6616</span> <span class="no">F4D2</span>  <span class="no">E33D</span> <span class="mi">5</span><span class="no">BA8</span> <span class="mi">7888</span> <span class="mi">3</span><span class="no">C86</span> <span class="no">E014</span>
<span class="n">uid</span>                  <span class="n">kmkim</span> <span class="p">(</span><span class="n">kmkim</span><span class="p">)</span> <span class="o">&lt;</span><span class="n">kwangmyung</span><span class="p">.</span><span class="nf">kim</span><span class="vi">@gmail</span><span class="p">.</span><span class="nf">com</span><span class="o">&gt;</span>
<span class="nb">sub</span>   <span class="mi">2048</span><span class="no">R</span><span class="o">/</span><span class="mi">5</span><span class="no">A4B24B5</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">08</span></code></pre></figure>

<h1 id="gnupg-key-목록-보기">GnuPG Key 목록 보기</h1>
<p>gpg –gen-key로 키를 생성하고 난 뒤 키는 ~/.gnupg/ 디렉토리에 만들어진다. 생성된 키를 확인하기 위해서는 다음과 같이 확인할 수 있다</p>

<p>공개키(public key)를 확인하기 위해서는 –list-keys 옵션으로 확인할 수 있다.</p>

<p>gpg –list-keys<br />
개인키(private key)를 확인하기 위해서는 –list-secret-keys 옵션으로 확인할 수 있다.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">root</span><span class="vi">@python</span><span class="ss">:/</span><span class="n">home</span><span class="c1"># gpg --list-keys</span>
<span class="sr">/root/</span><span class="p">.</span><span class="nf">gnupg</span><span class="o">/</span><span class="n">pubring</span><span class="p">.</span><span class="nf">gpg</span>
<span class="o">------------------------</span>
<span class="n">pub</span>   <span class="mi">2048</span><span class="no">R</span><span class="o">/</span><span class="mi">3</span><span class="no">C86E014</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">08</span>
<span class="n">uid</span>                  <span class="n">kmkim</span> <span class="p">(</span><span class="n">kmkim</span><span class="p">)</span> <span class="o">&lt;</span><span class="n">kwangmyung</span><span class="p">.</span><span class="nf">kim</span><span class="vi">@gmail</span><span class="p">.</span><span class="nf">com</span><span class="o">&gt;</span>
<span class="nb">sub</span>   <span class="mi">2048</span><span class="no">R</span><span class="o">/</span><span class="mi">5</span><span class="no">A4B24B5</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">08</span></code></pre></figure>

<p>gpg –list-secret-keys</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">root</span><span class="vi">@python</span><span class="ss">:/</span><span class="n">home</span><span class="c1"># gpg --list-secret-keys</span>
<span class="sr">/root/</span><span class="p">.</span><span class="nf">gnupg</span><span class="o">/</span><span class="n">secring</span><span class="p">.</span><span class="nf">gpg</span>
<span class="o">------------------------</span>
<span class="n">sec</span>   <span class="mi">2048</span><span class="no">R</span><span class="o">/</span><span class="mi">3</span><span class="no">C86E014</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">08</span>
<span class="n">uid</span>                  <span class="n">kmkim</span> <span class="p">(</span><span class="n">kmkim</span><span class="p">)</span> <span class="o">&lt;</span><span class="n">kwangmyung</span><span class="p">.</span><span class="nf">kim</span><span class="vi">@gmail</span><span class="p">.</span><span class="nf">com</span><span class="o">&gt;</span>
<span class="n">ssb</span>   <span class="mi">2048</span><span class="no">R</span><span class="o">/</span><span class="mi">5</span><span class="no">A4B24B5</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">08</span></code></pre></figure>

<h1 id="gpg-key를-사용하여-파일-암호화하기">gpg Key를 사용하여 파일 암호화하기</h1>
<p>개인키를 생성했으니 이제 키 기반으로 파일을 암호화해보자. 
예제를 위해 /home/seed/ test.data 파일을 만들었다.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">root</span><span class="vi">@python</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">seed</span><span class="c1"># cat test.data</span>
<span class="no">Have</span> <span class="n">an</span> <span class="n">awesome</span> <span class="n">day!</span></code></pre></figure>

<p>gpg –encrypt 명령어를 사용하여 파일을 암호화 한다. 이때 –recipient 옵션에 키를 생성할 때 입력한 ID를 입력한다.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">gpg</span> <span class="o">--</span><span class="n">output</span> <span class="o">&lt;</span><span class="err">암호화될파일이름</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">encrypt</span> <span class="o">--</span><span class="n">recipient</span> <span class="o">&lt;</span><span class="no">ID</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="err">암호화할파일이름</span><span class="o">&gt;</span></code></pre></figure>

<p>나의 경우는 kmkim 이다. 위에서 확인 가능</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">gpg</span> <span class="o">--</span><span class="n">output</span> <span class="sr">/home/see</span><span class="n">d</span><span class="o">/</span><span class="nb">test</span><span class="p">.</span><span class="nf">data</span><span class="p">.</span><span class="nf">gpg</span> <span class="o">--</span><span class="n">encrypt</span> <span class="o">--</span><span class="n">recipient</span> <span class="n">kmkim</span> <span class="sr">/home/see</span><span class="n">d</span><span class="o">/</span><span class="nb">test</span><span class="p">.</span><span class="nf">data</span></code></pre></figure>

<p>아래와 같이 gpg 파일이 생성된것을확인 할 수 있다.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">root</span><span class="vi">@python</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">seed</span><span class="c1"># ls</span>
<span class="nb">test</span><span class="p">.</span><span class="nf">data</span>  <span class="nb">test</span><span class="p">.</span><span class="nf">data</span><span class="p">.</span><span class="nf">gpg</span></code></pre></figure>

<p>암호화된것을 볼 수 있다.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">root</span><span class="vi">@python</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">seed</span><span class="c1"># cat test.data.gpg</span>
<span class="err">�</span>
 <span class="err">��</span><span class="p">.</span><span class="nf">oZK</span><span class="err">$��</span><span class="no">S</span><span class="o">&lt;</span><span class="err">�</span><span class="o">!</span><span class="err">��ɶ</span><span class="n">m</span><span class="err">�����</span> <span class="p">(</span><span class="err">��</span><span class="n">i</span><span class="err">�����񓀁</span><span class="n">v</span><span class="p">,</span><span class="o">!</span><span class="sc">?�</span><span class="err">���</span><span class="n">x</span><span class="err">�</span><span class="mi">2</span>
                                                <span class="err">ڽ�</span><span class="o">&amp;</span><span class="err">��</span><span class="no">N</span><span class="err">���</span><span class="no">Y</span><span class="err">�</span><span class="mi">1</span><span class="err">�</span><span class="n">j</span><span class="err">�߲���</span><span class="vg">$E0</span><span class="err">�</span><span class="n">k0</span><span class="err">�</span>
                                                                          <span class="err">�</span><span class="p">;</span><span class="err">�</span><span class="p">;</span><span class="no">U</span><span class="err">�</span><span class="o">/</span><span class="err">�</span><span class="no">F</span><span class="err">ˉ���</span><span class="no">I</span><span class="err">�</span><span class="n">g</span><span class="err">�</span><span class="mi">7</span><span class="err">��</span><span class="o">.</span><span class="mi">4</span><span class="o">~</span><span class="n">_</span><span class="o">^</span><span class="n">uT</span><span class="err">�</span><span class="o">!</span><span class="err">�</span><span class="o">/</span><span class="err">�</span><span class="n">kJ</span><span class="err">�Ʊ</span><span class="o">~</span><span class="err">�</span><span class="n">j8_</span><span class="p">;</span><span class="n">m</span><span class="err">�</span><span class="n">w</span><span class="err">��</span> <span class="err">��</span><span class="mi">0</span><span class="p">}</span><span class="mi">5</span><span class="err">$����</span><span class="o">+</span><span class="err">�</span><span class="n">eu</span><span class="err">����</span><span class="mi">5</span><span class="err">�</span><span class="no">Po</span><span class="err">@</span><span class="c1">#�</span>
<span class="err">�</span><span class="n">a</span><span class="err">�Ͻ�</span><span class="p">,</span><span class="err">�ď</span><span class="n">yWsp</span><span class="s2">"a��;�hE�"</span><span class="o">=</span><span class="err">�</span><span class="p">{</span><span class="err">�����</span><span class="no">Y</span><span class="err">�</span><span class="p">{</span><span class="err">؈��</span><span class="n">m</span><span class="err">ՠ�</span><span class="s2">"�4bi&amp;t��o��%���8��Aݮ�j,K��qO�f	^,A�N�Ѧ`�h%���"</span><span class="o">&amp;</span><span class="err">�</span><span class="no">K</span>
<span class="err"></span><span class="no">Y1</span><span class="err">�</span><span class="p">[(</span><span class="err">�</span></code></pre></figure>

<h1 id="gpg-key를-사용하여-파일-복호화하기">gpg Key를 사용하여 파일 복호화하기</h1>
<p>암호화된 파일을 복호화해보자. 기존의 원본파일은 test.data.backup 으로 변경후 복호화해보겠다.</p>

<p>암호화된 파일을 복호화하기 위해서는 gpg –decrypt 옵션을 사용해야한다. 복호화할 때는 개인키(private key)를 생성할 때 설정한 비밀번호를 입력해야 복호화가 된다. 비밀번호를 잘못 입력하면 당연히 복호화가 안된다.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">gpg</span> <span class="o">--</span><span class="n">output</span> <span class="o">&lt;</span><span class="err">파일이름</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">decrypt</span> <span class="o">&lt;</span><span class="err">암호화된파일이름</span><span class="o">&gt;</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">root</span><span class="vi">@python</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">seed</span><span class="c1"># mv /home/seed/test.data /home/seed/test.data.backup</span>
<span class="n">root</span><span class="vi">@python</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">seed</span><span class="c1"># gpg --output /home/seed/test.data --decrypt /home/seed/test.data.gpg</span>

<span class="no">You</span> <span class="n">need</span> <span class="n">a</span> <span class="n">passphrase</span> <span class="n">to</span> <span class="n">unlock</span> <span class="n">the</span> <span class="n">secret</span> <span class="n">key</span> <span class="k">for</span>
<span class="ss">user: </span><span class="s2">"kmkim (kmkim) &lt;kwangmyung.kim@gmail.com&gt;"</span>
<span class="mi">2048</span><span class="o">-</span><span class="n">bit</span> <span class="no">RSA</span> <span class="n">key</span><span class="p">,</span> <span class="no">ID</span> <span class="mi">5</span><span class="no">A4B24B5</span><span class="p">,</span> <span class="n">created</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">08</span> <span class="p">(</span><span class="n">main</span> <span class="n">key</span> <span class="no">ID</span> <span class="mi">3</span><span class="no">C86E014</span><span class="p">)</span>

<span class="ss">gpg: </span><span class="n">gpg</span><span class="o">-</span><span class="n">agent</span> <span class="n">is</span> <span class="n">not</span> <span class="n">available</span> <span class="k">in</span> <span class="n">this</span> <span class="n">session</span>
<span class="ss">gpg: </span><span class="no">Invalid</span> <span class="n">passphrase</span><span class="p">;</span> <span class="n">please</span> <span class="n">try</span> <span class="n">again</span> <span class="o">...</span>

<span class="no">You</span> <span class="n">need</span> <span class="n">a</span> <span class="n">passphrase</span> <span class="n">to</span> <span class="n">unlock</span> <span class="n">the</span> <span class="n">secret</span> <span class="n">key</span> <span class="k">for</span>
<span class="ss">user: </span><span class="s2">"kmkim (kmkim) &lt;kwangmyung.kim@gmail.com&gt;"</span>
<span class="mi">2048</span><span class="o">-</span><span class="n">bit</span> <span class="no">RSA</span> <span class="n">key</span><span class="p">,</span> <span class="no">ID</span> <span class="mi">5</span><span class="no">A4B24B5</span><span class="p">,</span> <span class="n">created</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">08</span> <span class="p">(</span><span class="n">main</span> <span class="n">key</span> <span class="no">ID</span> <span class="mi">3</span><span class="no">C86E014</span><span class="p">)</span>

<span class="ss">gpg: </span><span class="n">encrypted</span> <span class="n">with</span> <span class="mi">2048</span><span class="o">-</span><span class="n">bit</span> <span class="no">RSA</span> <span class="n">key</span><span class="p">,</span> <span class="no">ID</span> <span class="mi">5</span><span class="no">A4B24B5</span><span class="p">,</span> <span class="n">created</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">08</span>
      <span class="s2">"kmkim (kmkim) &lt;kwangmyung.kim@gmail.com&gt;"</span></code></pre></figure>

<p>복호화된 파일과 내용을 확인 가능하다.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">root</span><span class="vi">@python</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">seed</span><span class="c1"># ls</span>
<span class="nb">test</span><span class="p">.</span><span class="nf">data</span>  <span class="nb">test</span><span class="p">.</span><span class="nf">data</span><span class="p">.</span><span class="nf">backup</span>  <span class="nb">test</span><span class="p">.</span><span class="nf">data</span><span class="p">.</span><span class="nf">gpg</span>
<span class="n">root</span><span class="vi">@python</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">seed</span><span class="c1"># cat test.data</span>
<span class="no">Have</span> <span class="n">an</span> <span class="n">awesome</span> <span class="n">day!</span></code></pre></figure>

<h1 id="공개키-배포">공개키 배포</h1>
<p>생성된 키를 다른 서버에서 작업을 하고 싶으면 공개키(public key)를 배포하여 생성된 공개키 기반으로 작업을 할 수 있다.</p>

<h2 id="공개키-export">공개키 Export</h2>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">gpg</span> <span class="o">--</span><span class="n">armor</span> <span class="o">--</span><span class="n">output</span> <span class="o">&lt;</span><span class="err">파일이름</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">export</span> <span class="s2">"&lt;ID&gt;"</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">root</span><span class="vi">@python</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">seed</span><span class="c1"># gpg --armor --output kmkim-gpg.pub --export "kmkim"</span></code></pre></figure>

<p>생성된 파일과 공개키를 확인 할 수 있다.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">root</span><span class="vi">@python</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">seed</span><span class="c1"># ls</span>
<span class="n">kmkim</span><span class="o">-</span><span class="n">gpg</span><span class="p">.</span><span class="nf">pub</span>  <span class="nb">test</span><span class="p">.</span><span class="nf">data</span>  <span class="nb">test</span><span class="p">.</span><span class="nf">data</span><span class="p">.</span><span class="nf">backup</span>  <span class="nb">test</span><span class="p">.</span><span class="nf">data</span><span class="p">.</span><span class="nf">gpg</span>
<span class="n">root</span><span class="vi">@python</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">seed</span><span class="c1"># cat kmkim-gpg.pub</span>
<span class="o">-----</span><span class="k">BEGIN</span> <span class="no">PGP</span> <span class="no">PUBLIC</span> <span class="no">KEY</span> <span class="no">BLOCK</span><span class="o">-----</span>
<span class="no">Version</span><span class="p">:</span> <span class="no">GnuPG</span> <span class="n">v1</span>

<span class="n">mQENBFmJ1IwBCADQAdVdoM7MhbSHOSrVRC56uCFGA28iJqeBYFwqrjNQ</span><span class="o">/</span><span class="mi">0</span><span class="no">LXHFUv</span>
<span class="no">T3Q9fhCSH6HoeII</span><span class="o">+</span><span class="no">TsZ</span><span class="o">/</span><span class="no">NnPyOmEgIDBtzhMSsG71NydhqU7GHNnQMZy</span><span class="o">/</span><span class="n">a</span>
<span class="o">--</span><span class="err">중략</span> <span class="o">--</span>
<span class="no">YX3OSiuUXW3paSkkqNKHKtrPnFh</span><span class="o">+</span><span class="no">N02tG</span>
<span class="no">GMcopngeu5RyohHJaOu3n6rWswJ1a8OiH604PC8b6mde7WBREEaSF4iTlFSAKOWQ</span>
<span class="mi">7</span><span class="n">uZHpcAneUB5oqaNjpXTesgwOA29LELLYNGY0hX39HRGuDjNkT1paFtUUfJBnbkH</span>
<span class="n">tjsKcvRG845d</span><span class="o">/</span><span class="n">wgCfeUGZdVh</span><span class="o">/</span><span class="no">GdMUqhoskSfLOYFvO060Pe1HYsT34xvXeL44XVp</span>
<span class="no">EODeV4757e1f8z5XNLTUSFi8Uhpo02wqlJO</span><span class="o">+</span><span class="no">KhJgHa28FWoAPMytI3</span><span class="o">+</span><span class="no">MqwMXF4a</span><span class="o">/</span>
<span class="no">NshgC03PAVPqfTr</span><span class="o">+</span><span class="mi">84</span><span class="no">HYi</span><span class="o">/</span><span class="no">J2dU0G9MEKbSaDqJpuHwukBiK5Kv72</span>
<span class="o">=</span><span class="no">SCZk</span>
<span class="o">-----</span><span class="k">END</span> <span class="no">PGP</span> <span class="no">PUBLIC</span> <span class="no">KEY</span> <span class="no">BLOCK</span><span class="o">-----</span></code></pre></figure>

<h2 id="공개키-import">공개키 Import</h2>
<p>생성한 공개키를 다른 서버에 전송해서 임포트하여 사용할 수 있다.</p>

<p>docker 를 이용해서 home 디랙토리를 붙여서 컨테이너를 하나 생성한다. 만들어진 파일들이 있는것을 볼 수 있다.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="err">$</span> <span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">it</span> <span class="o">--</span><span class="nb">name</span> <span class="n">gpg</span> <span class="o">-</span><span class="n">h</span> <span class="n">gpg</span> <span class="o">-</span><span class="n">v</span> <span class="err">$</span><span class="p">(</span><span class="n">pwd</span><span class="p">)</span><span class="o">/</span><span class="n">home</span><span class="ss">:/</span><span class="n">home</span> <span class="n">xmlangel</span><span class="o">/</span><span class="n">base</span><span class="o">-</span><span class="n">ubuntu</span>
<span class="n">root</span><span class="vi">@gpg</span><span class="ss">:/</span><span class="c1"># cd home/</span>
<span class="n">root</span><span class="vi">@gpg</span><span class="ss">:/</span><span class="n">home</span><span class="c1"># cd seed/</span>
<span class="n">root</span><span class="vi">@gpg</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">seed</span><span class="c1"># ls</span>
<span class="n">kmkim</span><span class="o">-</span><span class="n">gpg</span><span class="p">.</span><span class="nf">pub</span>  <span class="nb">test</span><span class="p">.</span><span class="nf">data</span>  <span class="nb">test</span><span class="p">.</span><span class="nf">data</span><span class="p">.</span><span class="nf">backup</span>  <span class="nb">test</span><span class="p">.</span><span class="nf">data</span><span class="p">.</span><span class="nf">gpg</span>
<span class="n">root</span><span class="vi">@gpg</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">seed</span><span class="c1">#</span></code></pre></figure>

<p>그럼 Import 시켜보겠다.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">root</span><span class="vi">@gpg</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">seed</span><span class="c1"># gpg --import kmkim-gpg.pub</span>
<span class="ss">gpg: </span><span class="n">directory</span> <span class="sb">`/root/.gnupg' created
gpg: new configuration file `</span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="p">.</span><span class="nf">gnupg</span><span class="o">/</span><span class="n">gpg</span><span class="p">.</span><span class="nf">conf</span><span class="s1">' created
gpg: WARNING: options in `/root/.gnupg/gpg.conf'</span> <span class="n">are</span> <span class="n">not</span> <span class="n">yet</span> <span class="n">active</span> <span class="n">during</span> <span class="n">this</span> <span class="n">run</span>
<span class="ss">gpg: </span><span class="n">keyring</span> <span class="sb">`/root/.gnupg/secring.gpg' created
gpg: keyring `</span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="p">.</span><span class="nf">gnupg</span><span class="o">/</span><span class="n">pubring</span><span class="p">.</span><span class="nf">gpg</span><span class="err">'</span> <span class="n">created</span>
<span class="ss">gpg: </span><span class="sr">/root/</span><span class="p">.</span><span class="nf">gnupg</span><span class="o">/</span><span class="n">trustdb</span><span class="p">.</span><span class="nf">gpg</span><span class="p">:</span> <span class="n">trustdb</span> <span class="n">created</span>
<span class="ss">gpg: </span><span class="n">key</span> <span class="mi">3</span><span class="no">C86E014</span><span class="p">:</span> <span class="kp">public</span> <span class="n">key</span> <span class="s2">"kmkim (kmkim) &lt;kwangmyung.kim@gmail.com&gt;"</span> <span class="n">imported</span>
<span class="ss">gpg: </span><span class="no">Total</span> <span class="n">number</span> <span class="ss">processed: </span><span class="mi">1</span>
<span class="ss">gpg:               imported: </span><span class="mi">1</span>  <span class="p">(</span><span class="no">RSA</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span></code></pre></figure>

<p>키가 Import 된것을 확인 가능하다.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">root</span><span class="vi">@gpg</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">seed</span><span class="c1"># gpg --list-keys</span>
<span class="sr">/root/</span><span class="p">.</span><span class="nf">gnupg</span><span class="o">/</span><span class="n">pubring</span><span class="p">.</span><span class="nf">gpg</span>
<span class="o">------------------------</span>
<span class="n">pub</span>   <span class="mi">2048</span><span class="no">R</span><span class="o">/</span><span class="mi">3</span><span class="no">C86E014</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">08</span>
<span class="n">uid</span>                  <span class="n">kmkim</span> <span class="p">(</span><span class="n">kmkim</span><span class="p">)</span> <span class="o">&lt;</span><span class="n">kwangmyung</span><span class="p">.</span><span class="nf">kim</span><span class="vi">@gmail</span><span class="p">.</span><span class="nf">com</span><span class="o">&gt;</span>
<span class="nb">sub</span>   <span class="mi">2048</span><span class="no">R</span><span class="o">/</span><span class="mi">5</span><span class="no">A4B24B5</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">08</span></code></pre></figure>

<p>공개키를 가져왔으니 공개키를 가지고 암호화가 가능하다.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">root</span><span class="vi">@gpg</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">seed</span><span class="c1"># gpg --output /home/seed/test.data2.gpg --encrypt --recipient kmkim /home/seed/test.data</span>
<span class="ss">gpg: </span><span class="mi">5</span><span class="no">A4B24B5</span><span class="p">:</span> <span class="no">There</span> <span class="n">is</span> <span class="n">no</span> <span class="n">assurance</span> <span class="n">this</span> <span class="n">key</span> <span class="n">belongs</span> <span class="n">to</span> <span class="n">the</span> <span class="n">named</span> <span class="n">user</span>

<span class="n">pub</span>  <span class="mi">2048</span><span class="no">R</span><span class="o">/</span><span class="mi">5</span><span class="no">A4B24B5</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">08</span> <span class="n">kmkim</span> <span class="p">(</span><span class="n">kmkim</span><span class="p">)</span> <span class="o">&lt;</span><span class="n">kwangmyung</span><span class="p">.</span><span class="nf">kim</span><span class="vi">@gmail</span><span class="p">.</span><span class="nf">com</span><span class="o">&gt;</span>
 <span class="no">Primary</span> <span class="n">key</span> <span class="ss">fingerprint: </span><span class="no">B6D2</span> <span class="mi">95</span><span class="no">AF</span> <span class="no">D537</span> <span class="mi">6616</span> <span class="no">F4D2</span>  <span class="no">E33D</span> <span class="mi">5</span><span class="no">BA8</span> <span class="mi">7888</span> <span class="mi">3</span><span class="no">C86</span> <span class="no">E014</span>
      <span class="no">Subkey</span> <span class="ss">fingerprint: </span><span class="mi">1037</span> <span class="no">E47A</span> <span class="mi">5485</span> <span class="no">AB3F</span> <span class="mi">4</span><span class="no">E25</span>  <span class="mi">67</span><span class="no">B8</span> <span class="mi">80</span><span class="no">B6</span> <span class="mi">2</span><span class="no">E6F</span> <span class="mi">5</span><span class="no">A4B</span> <span class="mi">24</span><span class="no">B5</span>

<span class="no">It</span> <span class="n">is</span> <span class="no">NOT</span> <span class="n">certain</span> <span class="n">that</span> <span class="n">the</span> <span class="n">key</span> <span class="n">belongs</span> <span class="n">to</span> <span class="n">the</span> <span class="n">person</span> <span class="n">named</span>
<span class="k">in</span> <span class="n">the</span> <span class="n">user</span> <span class="no">ID</span><span class="o">.</span>  <span class="no">If</span> <span class="n">you</span> <span class="o">*</span><span class="n">really</span><span class="o">*</span> <span class="n">know</span> <span class="n">what</span> <span class="n">you</span> <span class="n">are</span> <span class="n">doing</span><span class="p">,</span>
<span class="n">you</span> <span class="n">may</span> <span class="n">answer</span> <span class="n">the</span> <span class="k">next</span> <span class="n">question</span> <span class="n">with</span> <span class="n">yes</span><span class="o">.</span>

<span class="no">Use</span> <span class="n">this</span> <span class="n">key</span> <span class="n">anyway?</span> <span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="no">N</span><span class="p">)</span> <span class="n">y</span>
<span class="n">root</span><span class="vi">@gpg</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">seed</span><span class="c1"># lll</span>
<span class="ss">bash: lll: </span><span class="n">command</span> <span class="n">not</span> <span class="n">found</span>
<span class="n">root</span><span class="vi">@gpg</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">seed</span><span class="c1"># ls</span>
<span class="n">kmkim</span><span class="o">-</span><span class="n">gpg</span><span class="p">.</span><span class="nf">pub</span> <span class="nb">test</span><span class="p">.</span><span class="nf">data</span> <span class="nb">test</span><span class="p">.</span><span class="nf">data2</span><span class="p">.</span><span class="nf">gpg</span></code></pre></figure>

<p>하지만 secret key 가 없어 복호화는 안된다.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">root</span><span class="vi">@gpg</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">seed</span><span class="c1">#  gpg --output /home/seed/test.data2 --decrypt /home/seed/test.data.gpg</span>
<span class="ss">gpg: </span><span class="n">encrypted</span> <span class="n">with</span> <span class="mi">2048</span><span class="o">-</span><span class="n">bit</span> <span class="no">RSA</span> <span class="n">key</span><span class="p">,</span> <span class="no">ID</span> <span class="mi">5</span><span class="no">A4B24B5</span><span class="p">,</span> <span class="n">created</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">08</span>
      <span class="s2">"kmkim (kmkim) &lt;kwangmyung.kim@gmail.com&gt;"</span>
<span class="ss">gpg: </span><span class="n">decryption</span> <span class="ss">failed: </span><span class="n">secret</span> <span class="n">key</span> <span class="n">not</span> <span class="n">available</span></code></pre></figure>

<h2 id="개인키-export">개인키 Export</h2>
<p>개인키(private key)를 배포하여 작업을 할 하려면 개인키를 export 하면된다.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">root</span><span class="vi">@python</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">seed</span><span class="c1"># gpg -armor --output kmkim-gpg.secret --export-secret-keys 'kmkim'</span>
<span class="n">root</span><span class="vi">@python</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">seed</span><span class="c1"># ls</span>
<span class="n">kmkim</span><span class="o">-</span><span class="n">gpg</span><span class="p">.</span><span class="nf">pub</span>  <span class="n">kmkim</span><span class="o">-</span><span class="n">gpg</span><span class="p">.</span><span class="nf">secret</span></code></pre></figure>

<h2 id="개인키-import">개인키 Import</h2>

<p>공개키와 마찬가지로 개인키도 Import 하면 된다.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">root</span><span class="vi">@gpg</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">seed</span><span class="c1"># gpg --import kmkim-gpg.secret</span>
<span class="ss">gpg: </span><span class="n">key</span> <span class="mi">3</span><span class="no">C86E014</span><span class="p">:</span> <span class="n">secret</span> <span class="n">key</span> <span class="n">imported</span>
<span class="ss">gpg: </span><span class="n">key</span> <span class="mi">3</span><span class="no">C86E014</span><span class="p">:</span> <span class="s2">"kmkim (kmkim) &lt;kwangmyung.kim@gmail.com&gt;"</span> <span class="n">not</span> <span class="n">changed</span>
<span class="ss">gpg: </span><span class="no">Total</span> <span class="n">number</span> <span class="ss">processed: </span><span class="mi">1</span>
<span class="ss">gpg:              unchanged: </span><span class="mi">1</span>
<span class="ss">gpg:       </span><span class="n">secret</span> <span class="n">keys</span> <span class="ss">read: </span><span class="mi">1</span>
<span class="ss">gpg:   </span><span class="n">secret</span> <span class="n">keys</span> <span class="ss">imported: </span><span class="mi">1</span></code></pre></figure>

<p>Import 된것을확인 해본다.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">root</span><span class="vi">@gpg</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">seed</span><span class="c1"># gpg --list-secret-keys</span>
<span class="sr">/root/</span><span class="p">.</span><span class="nf">gnupg</span><span class="o">/</span><span class="n">secring</span><span class="p">.</span><span class="nf">gpg</span>
<span class="o">------------------------</span>
<span class="n">sec</span>   <span class="mi">2048</span><span class="no">R</span><span class="o">/</span><span class="mi">3</span><span class="no">C86E014</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">08</span>
<span class="n">uid</span>                  <span class="n">kmkim</span> <span class="p">(</span><span class="n">kmkim</span><span class="p">)</span> <span class="o">&lt;</span><span class="n">kwangmyung</span><span class="p">.</span><span class="nf">kim</span><span class="vi">@gmail</span><span class="p">.</span><span class="nf">com</span><span class="o">&gt;</span>
<span class="n">ssb</span>   <span class="mi">2048</span><span class="no">R</span><span class="o">/</span><span class="mi">5</span><span class="no">A4B24B5</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">08</span></code></pre></figure>

<p>이제 복호화를 진행해보면 정상적으로 복호화가 된다.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">root</span><span class="vi">@gpg</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">seed</span><span class="c1"># gpg --output /home/seed/test.data2 --decrypt /home/seed/test.data.gpg</span>

<span class="no">You</span> <span class="n">need</span> <span class="n">a</span> <span class="n">passphrase</span> <span class="n">to</span> <span class="n">unlock</span> <span class="n">the</span> <span class="n">secret</span> <span class="n">key</span> <span class="k">for</span>
<span class="ss">user: </span><span class="s2">"kmkim (kmkim) &lt;kwangmyung.kim@gmail.com&gt;"</span>
<span class="mi">2048</span><span class="o">-</span><span class="n">bit</span> <span class="no">RSA</span> <span class="n">key</span><span class="p">,</span> <span class="no">ID</span> <span class="mi">5</span><span class="no">A4B24B5</span><span class="p">,</span> <span class="n">created</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">08</span> <span class="p">(</span><span class="n">main</span> <span class="n">key</span> <span class="no">ID</span> <span class="mi">3</span><span class="no">C86E014</span><span class="p">)</span>

<span class="ss">gpg: </span><span class="n">gpg</span><span class="o">-</span><span class="n">agent</span> <span class="n">is</span> <span class="n">not</span> <span class="n">available</span> <span class="k">in</span> <span class="n">this</span> <span class="n">session</span>
<span class="ss">gpg: </span><span class="no">Invalid</span> <span class="n">passphrase</span><span class="p">;</span> <span class="n">please</span> <span class="n">try</span> <span class="n">again</span> <span class="o">...</span>

<span class="no">You</span> <span class="n">need</span> <span class="n">a</span> <span class="n">passphrase</span> <span class="n">to</span> <span class="n">unlock</span> <span class="n">the</span> <span class="n">secret</span> <span class="n">key</span> <span class="k">for</span>
<span class="ss">user: </span><span class="s2">"kmkim (kmkim) &lt;kwangmyung.kim@gmail.com&gt;"</span>
<span class="mi">2048</span><span class="o">-</span><span class="n">bit</span> <span class="no">RSA</span> <span class="n">key</span><span class="p">,</span> <span class="no">ID</span> <span class="mi">5</span><span class="no">A4B24B5</span><span class="p">,</span> <span class="n">created</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">08</span> <span class="p">(</span><span class="n">main</span> <span class="n">key</span> <span class="no">ID</span> <span class="mi">3</span><span class="no">C86E014</span><span class="p">)</span>

<span class="ss">gpg: </span><span class="n">encrypted</span> <span class="n">with</span> <span class="mi">2048</span><span class="o">-</span><span class="n">bit</span> <span class="no">RSA</span> <span class="n">key</span><span class="p">,</span> <span class="no">ID</span> <span class="mi">5</span><span class="no">A4B24B5</span><span class="p">,</span> <span class="n">created</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">08</span>
      <span class="s2">"kmkim (kmkim) &lt;kwangmyung.kim@gmail.com&gt;"</span>
<span class="n">root</span><span class="vi">@gpg</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">seed</span><span class="c1"># ls</span>
<span class="n">kmkim</span><span class="o">-</span><span class="n">gpg</span><span class="p">.</span><span class="nf">pub</span>  <span class="n">kmkim</span><span class="o">-</span><span class="n">gpg</span><span class="p">.</span><span class="nf">secret</span>  <span class="nb">test</span><span class="p">.</span><span class="nf">data</span>  <span class="nb">test</span><span class="p">.</span><span class="nf">data2</span>  <span class="nb">test</span><span class="p">.</span><span class="nf">data2</span><span class="p">.</span><span class="nf">gpg</span>  <span class="nb">test</span><span class="p">.</span><span class="nf">data</span><span class="p">.</span><span class="nf">backup</span>  <span class="nb">test</span><span class="p">.</span><span class="nf">data</span><span class="p">.</span><span class="nf">gpg</span>
<span class="n">root</span><span class="vi">@gpg</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">seed</span><span class="c1"># cat test.data2</span>
<span class="no">Have</span> <span class="n">an</span> <span class="n">awesome</span> <span class="n">day!</span></code></pre></figure>

<h1 id="gpg-key-삭제">GPG Key 삭제</h1>
<p>생성한 GPG key를 삭제하고 하려면 –delete-secret-key와 –delete-key로 할 수 있다. 키 삭제는 반드시 개인키를 먼저 삭제해야한다.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">gpg</span> <span class="o">--</span><span class="n">delete</span><span class="o">-</span><span class="n">secret</span><span class="o">-</span><span class="n">key</span> <span class="s2">"&lt;ID&gt;"</span>
<span class="n">gpg</span> <span class="o">--</span><span class="n">delete</span><span class="o">-</span><span class="n">key</span> <span class="s2">"&lt;ID&gt;"</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">root</span><span class="vi">@gpg</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">seed</span><span class="c1"># gpg --delete-secret-key "kmkim"</span>
<span class="n">gpg</span> <span class="p">(</span><span class="no">GnuPG</span><span class="p">)</span> <span class="mf">1.4</span><span class="o">.</span><span class="mi">20</span><span class="p">;</span> <span class="no">Copyright</span> <span class="p">(</span><span class="no">C</span><span class="p">)</span> <span class="mi">2015</span> <span class="no">Free</span> <span class="no">Software</span> <span class="no">Foundation</span><span class="p">,</span> <span class="no">Inc</span><span class="o">.</span>
<span class="no">This</span> <span class="n">is</span> <span class="n">free</span> <span class="ss">software: </span><span class="n">you</span> <span class="n">are</span> <span class="n">free</span> <span class="n">to</span> <span class="n">change</span> <span class="n">and</span> <span class="n">redistribute</span> <span class="n">it</span><span class="o">.</span>
<span class="no">There</span> <span class="n">is</span> <span class="no">NO</span> <span class="no">WARRANTY</span><span class="p">,</span> <span class="n">to</span> <span class="n">the</span> <span class="n">extent</span> <span class="n">permitted</span> <span class="n">by</span> <span class="n">law</span><span class="p">.</span>


<span class="nf">sec</span>  <span class="mi">2048</span><span class="no">R</span><span class="o">/</span><span class="mi">3</span><span class="no">C86E014</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">08</span> <span class="n">kmkim</span> <span class="p">(</span><span class="n">kmkim</span><span class="p">)</span> <span class="o">&lt;</span><span class="n">kwangmyung</span><span class="p">.</span><span class="nf">kim</span><span class="vi">@gmail</span><span class="p">.</span><span class="nf">com</span><span class="o">&gt;</span>

<span class="no">Delete</span> <span class="n">this</span> <span class="n">key</span> <span class="n">from</span> <span class="n">the</span> <span class="n">keyring?</span> <span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="no">N</span><span class="p">)</span> <span class="n">y</span>
<span class="no">This</span> <span class="n">is</span> <span class="n">a</span> <span class="n">secret</span> <span class="n">key!</span> <span class="o">-</span> <span class="n">really</span> <span class="n">delete?</span> <span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="no">N</span><span class="p">)</span> <span class="n">y</span>
<span class="n">root</span><span class="vi">@gpg</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">seed</span><span class="c1"># gpg --delete-key "kmkim"</span>
<span class="n">gpg</span> <span class="p">(</span><span class="no">GnuPG</span><span class="p">)</span> <span class="mf">1.4</span><span class="o">.</span><span class="mi">20</span><span class="p">;</span> <span class="no">Copyright</span> <span class="p">(</span><span class="no">C</span><span class="p">)</span> <span class="mi">2015</span> <span class="no">Free</span> <span class="no">Software</span> <span class="no">Foundation</span><span class="p">,</span> <span class="no">Inc</span><span class="o">.</span>
<span class="no">This</span> <span class="n">is</span> <span class="n">free</span> <span class="ss">software: </span><span class="n">you</span> <span class="n">are</span> <span class="n">free</span> <span class="n">to</span> <span class="n">change</span> <span class="n">and</span> <span class="n">redistribute</span> <span class="n">it</span><span class="o">.</span>
<span class="no">There</span> <span class="n">is</span> <span class="no">NO</span> <span class="no">WARRANTY</span><span class="p">,</span> <span class="n">to</span> <span class="n">the</span> <span class="n">extent</span> <span class="n">permitted</span> <span class="n">by</span> <span class="n">law</span><span class="p">.</span>


<span class="nf">pub</span>  <span class="mi">2048</span><span class="no">R</span><span class="o">/</span><span class="mi">3</span><span class="no">C86E014</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">08</span> <span class="n">kmkim</span> <span class="p">(</span><span class="n">kmkim</span><span class="p">)</span> <span class="o">&lt;</span><span class="n">kwangmyung</span><span class="p">.</span><span class="nf">kim</span><span class="vi">@gmail</span><span class="p">.</span><span class="nf">com</span><span class="o">&gt;</span>

<span class="no">Delete</span> <span class="n">this</span> <span class="n">key</span> <span class="n">from</span> <span class="n">the</span> <span class="n">keyring?</span> <span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="no">N</span><span class="p">)</span> <span class="n">y</span></code></pre></figure>

<p>리스트를 확인해보면 삭제된것을확인 가능하다.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">root</span><span class="vi">@gpg</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">seed</span><span class="c1"># gpg --list-secret-keys</span>
<span class="n">root</span><span class="vi">@gpg</span><span class="ss">:/</span><span class="n">home</span><span class="o">/</span><span class="n">seed</span><span class="c1"># gpg --list-keys</span></code></pre></figure>

<ul>
  <li>참고자료</li>
</ul>

<p><a href="https://zetawiki.com/wiki/RPM-GPG-KEY_%ED%8C%8C%EC%9D%BC_%EB%A7%8C%EB%93%A4%EA%B8%B0">RPM-GPG-KEY 파일 만들기</a></p>

<p><a href="https://michaelheap.com/running-gpg-agent-on-ubuntu/">Running gpg-agent on Ubuntu
</a></p>

  </div>
  <img src="/images/tag.png" alt="Tags: " class="tag-img"/><div class="post-tags">
  
  
  <a href="/tags/#GPG">GPG</a>
  
</div>
<br/>

  <div class="date">
    Written on July  1, 2017
  </div>
  <div class="comments">
	  
<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

	    var disqus_shortname = 'xmlangel-github-io';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

  </div>
</article>
</div>
    <div class="wrapper-footer">
      <div class="container">
        <footer class="footer">
          
<a href="mailto:kwangmyung.kim@gmail.com"><i class="svg-icon email"></i></a>


<a href="https://github.com/xmlangel"><i class="svg-icon github"></i></a>








        </footer>
      </div>
</div>
  </body>
</html>
