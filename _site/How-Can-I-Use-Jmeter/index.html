<!DOCTYPE html>
<html>
    <head>
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
<script type="text/javascript" src="http://localhost:4000/js/com.alybadawy.external_links.js"></script>


    <title>Jmeter-어떻게 쓰지?-01 – Even Though ... 그럼에도 불구하고 열심히 – 작은 끄적거림</title>

        <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="웹테스트를 진행하다가 동시 사용자 몇명까지 처리가 가능한지 또는 부하를 주고 싶을경우 Jmeter 를 이용하면 손쉽게 테스트를 할수 있다.

" />
    <meta property="og:description" content="웹테스트를 진행하다가 동시 사용자 몇명까지 처리가 가능한지 또는 부하를 주고 싶을경우 Jmeter 를 이용하면 손쉽게 테스트를 할수 있다.

" />
    
    <meta name="author" content="Even Though ... 그럼에도 불구하고 열심히" />

    
    <meta property="og:title" content="Jmeter-어떻게 쓰지?-01" />
    <meta property="twitter:title" content="Jmeter-어떻게 쓰지?-01" />
    

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="alternate" type="application/rss+xml" title="Even Though ... 그럼에도 불구하고 열심히 - 작은 끄적거림" href="/feed.xml" />

    <!-- Created with Jekyll Now - http://github.com/barryclark/jekyll-now -->
  </head>
  
	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-55180057-2', 'auto');
		ga('send', 'pageview', {
		  'page': '/How-Can-I-Use-Jmeter/',
		  'title': 'Jmeter-어떻게 쓰지?-01'
		});
	</script>
	<!-- End Google Analytics -->


  <body>
      <nav class="navbar navbar-pithy" role="navigation">
    <div class="container">
        <div class="collapse navbar-collapse" id="pithy-navbar">
                    <a href="/">home</a>
                    <a href="/about/">about</a>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
    </nav>
    
    <div class="wrapper-masthead">
      <div class="container">
        <header class="masthead clearfix">
          <a href="/" class="site-avatar"><img src="/images/xmlangel.jpg" /></a>

          <div class="site-info">
            <h1 class="site-name"><a href="/">Even Though ... 그럼에도 불구하고 열심히</a></h1>
            <p class="site-description">작은 끄적거림</p>
          </div>
        </header>
        
        <!-- 추가 코드 -->
  <div id="toc" hidden>
  </div>
  <!-- 추가 코드 -->
      </div>
    </div>
    
    <!-- 추가 코드 -->
<script type="text/javascript">
  $(document).ready(function(){
     var tag = null;
     $("h1,h2,h3,h4,h5,h6").not(".subtitle").not(".post-title").not(".index").each(function(i,item){
       tag = $(item).get(0).localName;
       $(item).attr("id","content_"+i);
       $("#toc").append('<a class="new'+tag+'" href="#content_'+i+'">'+$(this).text()+'</a></br>');
     });
 
     if(tag !=null ){
       $(".newh1").css("margin-left",0);
       $(".newh2").css("margin-left",20);
       $(".newh3").css("margin-left",40);
       $(".newh4").css("margin-left",60);
       $(".newh5").css("margin-left",80);
       $(".newh6").css("margin-left",100);
 
       $("#toc").attr('hidden', false);
     }
  });
 </script>
 <!-- 추가 코드 -->
    <div id="s_left">
<div style="border:1px dashed; padding:5px;" ><font size=3>Tags</font>  
<!-- <h3>Tags</h3> -->
<ul class="tag-cloud">

  <span style="font-size: 83%">
    <a href="/tags/#docker">
      docker
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#debian">
      debian
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#dpkg">
      dpkg
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#SoapUI">
      SoapUI
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 83%">
    <a href="/tags/#Jmeter">
      Jmeter
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#GPG">
      GPG
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#linux">
      linux
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#command">
      command
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 79%">
    <a href="/tags/#Ubuntu">
      Ubuntu
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#Network">
      Network
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 79%">
    <a href="/tags/#IP">
      IP
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#route">
      route
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#chef">
      chef
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#python">
      python
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#download">
      download
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#urllib">
      urllib
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#PyDev">
      PyDev
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#virtualenv">
      virtualenv
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#Python">
      Python
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#vscode">
      vscode
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#kuberenetes">
      kuberenetes
    </a> &nbsp;&nbsp;
  </span>

  <span style="font-size: 74%">
    <a href="/tags/#K8s">
      K8s
    </a> &nbsp;&nbsp;
  </span>

</ul></div>
<p>
<div style="border:1px dashed; padding:5px;"><font size=3>Recents</font>  

<!-- <h3>Recent</h3> -->

  <article class="featured-list">
    <header class="featured-header">
      <a href="/install-kuberenetes/">Centos 에서 Kuberenetes 설치하기</a>
    </header>
    <div class="featured-post">
      centos 에 설치하기 위해서는 master node 와 minion 에 모두 ce...
    </div>
    <footer>
      <a href="/install-kuberenetes/" class="button">Read more...</a>
    </footer>
  </article>

  <article class="featured-list">
    <header class="featured-header">
      <a href="/vscode/">sublim 에서 vs code 로 </a>
    </header>
    <div class="featured-post">
      Sublime  에서 vs code 로 넘어왔다.* 목차{:toc}# vscode 터...
    </div>
    <footer>
      <a href="/vscode/" class="button">Read more...</a>
    </footer>
  </article>

  <article class="featured-list">
    <header class="featured-header">
      <a href="/pydev-setup/">virtualenv로 Pydev 와 Django 설정 하기</a>
    </header>
    <div class="featured-post">
      Eclipes 플러그인인 PyDev 를 이용한 Django 설정을 하는 법입니다.* ...
    </div>
    <footer>
      <a href="/pydev-setup/" class="button">Read more...</a>
    </footer>
  </article>
</div>
</div>
<div id="main" role="main" class="container" ><article class="post">
    <font color=tomato size=6>Jmeter-어떻게 쓰지?-01</font>  
  <!-- <h1>Jmeter-어떻게 쓰지?-01</h1> -->

  <div class="entry">
    <p>웹테스트를 진행하다가 동시 사용자 몇명까지 처리가 가능한지 또는 부하를 주고 싶을경우 Jmeter 를 이용하면 손쉽게 테스트를 할수 있다.</p>

<ul id="markdown-toc">
  <li><a href="#jmeter-사용해보기" id="markdown-toc-jmeter-사용해보기">Jmeter 사용해보기</a>    <ul>
      <li><a href="#테스트-환경" id="markdown-toc-테스트-환경">테스트 환경</a></li>
      <li><a href="#간단한-테스트-해보기" id="markdown-toc-간단한-테스트-해보기">간단한 테스트 해보기</a>        <ul>
          <li><a href="#처음화면" id="markdown-toc-처음화면">처음화면</a></li>
          <li><a href="#threadsthread-group" id="markdown-toc-threadsthread-group">Threads&gt;Thread Group</a></li>
          <li><a href="#samplerhttp-request-sampler" id="markdown-toc-samplerhttp-request-sampler">Sampler&gt;Http Request Sampler</a></li>
          <li><a href="#listnerview-result-tree" id="markdown-toc-listnerview-result-tree">Listner&gt;View Result Tree</a></li>
          <li><a href="#config-elementhttp-request-defaults" id="markdown-toc-config-elementhttp-request-defaults">Config Element&gt;Http Request Defaults</a></li>
          <li><a href="#threadsstepping-thread-group" id="markdown-toc-threadsstepping-thread-group">Threads&gt;Stepping Thread Group</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h1 id="jmeter-사용해보기">Jmeter 사용해보기</h1>

<h2 id="테스트-환경">테스트 환경</h2>

<p>부하 발생을 목적으로 하는 프로그램으로(물론 일반 웹시나리오 테스트들도 이용이 가능하다.) 외부로 테스트를 수행하면 네트워크에 무리가 갈수 있으므로 내가 사용하고 있는 PC 에서 환경을 만들어 테스트를 해보고자 한다.</p>

<p>간단히 테스트 해보기 위해 Spring PetShop 을 이용해보겠다.</p>

<p>해당 프로젝트는 아래에서 확인 가능하다.</p>

<p><a href="https://github.com/spring-projects/spring-petclinic">https://github.com/spring-projects/spring-petclinic</a></p>

<figure class="highlight"><pre><code class="language-git" data-lang="git">git clone https://github.com/spring-projects/spring-petclinic.git
cd spring-petclinic
./mvnw spring-boot:run</code></pre></figure>

<p>build 후 java 로 실행도 가능하다.</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">java <span class="nt">-jar</span> spring-petclinic-1.5.1.jar <span class="nt">--server</span>.port<span class="o">=</span>8080 &amp;</code></pre></figure>

<p>http://localhost:8080 으로 접속하면  개새끼 한마리랑 냥이 한마리가 보일것이다.</p>

<p><img src="http://localhost:4000/assets/images/petshopforspring.png" alt="petshop" width="100%" height="100%" /></p>

<h2 id="간단한-테스트-해보기">간단한 테스트 해보기</h2>
<p>Jmeter 에서는 테스트 스크립트를 Test Plan 이라고 표현한다.</p>

<p>처음 만들어볼 Test Plan 은 3 Step 으로 진행해보려고 한다.</p>

<ol>
  <li>Pet Shop 페이지 진입</li>
  <li>Find Owner 페이지에 접속</li>
  <li>Error 발생 페이지 접속</li>
</ol>

<ul>
  <li>
    <p>Pet Shop 페이지 진입
<img src="http://localhost:4000/assets/images/petshopforspring.png" alt="petshop" width="100%" height="100%" /></p>
  </li>
  <li>
    <p>Find Owner 페이지에 접속
<img src="http://localhost:4000/assets/images/petshop-01.png" alt="petshop-01" width="100%" height="100%" /></p>
  </li>
  <li>
    <p>Error 발생 페이지 접속 
<img src="http://localhost:4000/assets/images/petshop-02.png" alt="petshop-02" width="100%" height="100%" /></p>
  </li>
</ul>

<h4 id="처음화면">처음화면</h4>
<p>Jmeter 를 처음 실행하면 Test Plan 이라는 아래와 같은 화면이 나타난다.</p>

<p><img src="http://localhost:4000/assets/images/jmeter-01.png" alt="Jmeter-01" width="100%" height="100%" /></p>

<h4 id="threadsthread-group">Threads&gt;Thread Group</h4>
<p>Test 를 수행할때 제일 먼재 해줘야 하는 부분이 Threads(User)를 만들어주는 부분이다 모든 시작은 여기서 부터 해준다.
Add&gt;Threads&gt;Thread Group
<img src="http://localhost:4000/assets/images/jmeter-02.png" alt="Jmeter-02" width="50%" height="50%" /></p>

<p>Thread Group 이 만들어진다.</p>

<p>여기서 수행할 사람수 일반적으로 user 라고 한다. 그리고 반복할 횟수를 지정할수 있다.</p>

<p><img src="http://localhost:4000/assets/images/jmeter-03.png" alt="Jmeter-03" width="100%" height="100%" /></p>

<p>여기서는 10 명의 User 가 3 회 반복으로 총 30회 반복을 수행하는것으로 설정한것이다.</p>

<h4 id="samplerhttp-request-sampler">Sampler&gt;Http Request Sampler</h4>
<p>테스트 리스트를 생성하기위해 Http Request Sampler 를 추가해준다.</p>

<p><img src="http://localhost:4000/assets/images/Httprequest.png" alt="HttpREquest" width="100%" height="100%" /></p>

<p>추가후 Server Name 에 localhost Port number 에 8080 을 입력해준다.
<img src="http://localhost:4000/assets/images/jmeter-04.png" alt="Httprequest-02" width="100%" height="100%" /></p>
<h4 id="listnerview-result-tree">Listner&gt;View Result Tree</h4>
<p>정상 동작하는지 보고싶지 않은가? 그냥 하면 동작하는지 알수 없다.<br />
Listner 를 추가해줘야 한다.</p>

<p>View Result Tree Listner 를 추가해준후 실행을 하면 결과를 볼 수 있다.
<img src="http://localhost:4000/assets/images/jmeter-05.png" alt="viewResultTree-01" width="100%" height="100%" /></p>

<p>Result 를 보면 정상으로 처리된걸 볼수 있다.
<img src="http://localhost:4000/assets/images/jmeter-06.png" alt="viewResultTree-02" width="100%" height="100%" /></p>

<h3 id="config-elementhttp-request-defaults">Config Element&gt;Http Request Defaults</h3>
<p>여러개의 스텝을 넣어야 하는데 URL만 같고 뒤의 path 만 다르다. 이럴경우 Config Element 를 이용해서 쉽게 설정이 가능하다.</p>

<p>Http Request Defaults 를 이용하면 URL 만 넣고, Sampler 에서는 Path 만 지정해서 사용가능하다.
<img src="http://localhost:4000/assets/images/jmeter-07.png" alt="HttpRequestDefault-01" width="100%" height="100%" />
Server Name 과 Port 정보에 공통으로 사용할 정보들을 넣어준다.
<img src="http://localhost:4000/assets/images/jmeter-08.png" alt="HttpRequestDefault-02" width="100%" height="100%" />
그리고 기존에 Http Request 에서는 해당부분을 삭제해준다.
<img src="http://localhost:4000/assets/images/jmeter-09.png" alt="HttpRequestDefault-02" width="100%" height="100%" />
실행후 결과를 보면 공통으로 적용된 부분을 볼 수 있다.
<img src="http://localhost:4000/assets/images/jmeter-10.png" alt="HttpRequestDefault-02" width="100%" height="100%" /></p>

<p>나머지 부분도 Http Request 를 만들고 이름을 변경해서 정리해준후 결과를 보면 아래와 같이 모두 정상적으로 수행된 결과를 볼 수 있다.
<img src="http://localhost:4000/assets/images/jmeter-11.png" alt="HttpRequestDefault-02" width="100%" height="100%" /></p>

<p>Thread Group 에서 테스트 시간에 따른 Thread 숫자를 그래프로 볼수도 있다.</p>

<p><img src="http://localhost:4000/assets/images/jmeter-12.png" alt="HttpRequestDefault-02" width="100%" height="100%" />.
10개의 Thread 를 60초동안 생성했으므로 계단처럼 단계적으로 생성된것처럼 보인다.</p>

<p><img src="http://localhost:4000/assets/images/jmeter-13.png" alt="HttpRequestDefault-02" width="100%" height="100%" /></p>

<p>하지만 기본으로 제공되는 Thread Group 의 Ramp-Up Period 는 정교하지 못하다. Thread 를 100으로 설정해보겠다.
<img src="http://localhost:4000/assets/images/jmeter-14.png" alt="HttpRequestDefault-02" width="100%" height="100%" />
선형으로 나타난것을 볼수 있다.
<img src="http://localhost:4000/assets/images/jmeter-15.png" alt="HttpRequestDefault-02" width="100%" height="100%" /></p>

<p>점진적으로 증가하는 것은 테스트 할수 없다.</p>

<h3 id="threadsstepping-thread-group">Threads&gt;Stepping Thread Group</h3>

<p>만약 10개의 Thread 로 1분 동안 테스트 하고, 다시 10개의 Thread 를 추가해서 20개의 Thread 로 1분동안 테스트하도록 설정한다면 Thread Group의 Ramp-Up Period 로는 테스트 할 수 없다.(뭐 Thread Group 을 추가로 생성해서 StartUp Delay 를 각각 1분씩 추가하는 꼼수를 부릴수는 있겠다.)</p>

<p>이럴경우 추가로 플러그인은 추가해서 사용하는방법들이 있을 수 있다.
아래는 jp@gc - Stepping Thread Group 을 추가해서 테스트를 기본 Thread Group 을 삭제하고 옮겨봤다.
<img src="http://localhost:4000/assets/images/jmeter-16.png" alt="HttpRequestDefault-02" width="100%" height="100%" /></p>

<p>Threads Scheduling Parameters 에서 설정한데로 100명의 유저를 10 명씩 추가되는화면을 볼수 있다.
<img src="http://localhost:4000/assets/images/jmeter-17.png" alt="HttpRequestDefault-02" width="100%" height="100%" /></p>

<p>간단하게 적으려고 했는데 적다보니 길어졌다.</p>

<p>좀더 정리해가면서 적고 오늘은 여기시 그만………</p>

<p>간만에 쓰려니 역시 이것저것 써보면서 해봐야겠다.</p>


  </div>
  <img src="/images/tag.png" alt="Tags: " class="tag-img"/><div class="post-tags">
  
  
  <a href="/tags/#Jmeter">Jmeter</a>
  
</div>
<br/>

  <div class="date">
    Written on June 28, 2017
  </div>
  <div class="comments">
	  
<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

	    var disqus_shortname = 'xmlangel-github-io';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

  </div>
</article>
</div>
    <div class="wrapper-footer">
      <div class="container">
        <footer class="footer">
          
<a href="mailto:kwangmyung.kim@gmail.com"><i class="svg-icon email"></i></a>


<a href="https://github.com/xmlangel"><i class="svg-icon github"></i></a>








        </footer>
      </div>
</div>
  </body>
</html>
